<?xml version="1.0" encoding="UTF-8"?>

<commandSetRoot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation='commandSet.xsd'>
    <commandSet type="serial">
        <state>incomplete</state>
        <name>bsml2fasta workflow</name>
        <command>
            <type>RunUnixCommand</type>
            <name>create output directory</name>
            <state>incomplete</state>
            <executable>mkdir</executable>
            <arg>-p -m 777 $;OUTPUT_DIRECTORY$;</arg>
        </command>
        <command>
            <type>RunUnixCommand</type>
            <name>bsml2fasta</name>
            <state>incomplete</state>
            <executable>$;BIN_DIR$;/bsml2fasta</executable>
            <param>  
                <key>--bsml_input</key>
                <value>'$;INPUT_FILE$;'</value>
            </param>
            <param>  
                <key>--bsml_list</key>
                <value>'$;INPUT_FILE_LIST$;'</value>
            </param>
            <param>  
                <key>--class_filter</key>
                <value>'$;CLASS_FILTER$;'</value>
            </param>
            <param>
                <key>--header_class</key>
                <value>'$;HEADER_CLASS$;'</value>
            </param>
            <param>  
                <key>--format</key>
                <value>'$;FORMAT$;'</value>
            </param>
            <param>
            	<key>--split_multifasta</key>
            	<value>'$;SPLIT_MULTIFASTA$;'</value>
            </param>
            <param>
            	<key>--seqs_per_fasta</key>
            	<value>'$;SEQS_PER_FASTA$;'</value>
            </param>
            <param>  
                <key>--output</key>
                <value>'$;OUTPUT_DIRECTORY$;/$;OUTPUT_FILE$;'</value>
            </param>
            <param>  
                <key>--output_list</key>
                <value>'$;OUTPUT_LIST$;'</value>
            </param>
            <param>  
                <key>--parse_element</key>
                <value>'$;PARSE_ELEMENT$;'</value>
            </param>
            <param>  
                <key>--output_subdir_size</key>
                <value>$;OUTPUT_SUBDIR_SIZE$;</value>
            </param>
            <param>  
                <key>--role_exclude</key>
                <value>'$;ROLE_EXCLUDE$;'</value>
            </param>
            <param>  
                <key>--role_include</key>
                <value>'$;ROLE_INCLUDE$;'</value>
            </param>
            <param>  
                <key>--bp_extension</key>
                <value>'$;BP_EXTENSION$;'</value>
            </param>
            <param>  
                <key>--use_feature_ids_in_fasta</key>
                <value>'$;USE_FEATURE_IDS_IN_FASTA$;'</value>
            </param>
            <param>
                <key>--use_sequence_ids_in_fasta</key>
                <value>'$;USE_SEQUENCE_IDS_IN_FASTA$;'</value>
            </param>
            <param>
                <key>--coords</key>
                <value>$;COORDS$;</value>
            </param>
            <param>
                <key>--suffix</key>
                <value>'$;OUTPUT_SUFFIX$;'</value>
            </param>
        </command>
	<command>
            <type>RunUnixCommand</type>
            <name>Fix fasta</name>
            <state>incomplete</state>
            <executable>for F in `cat $;OUTPUT_LIST$;`;do perl -i -p -ne 'if($_ !~ /^>/) {$_ =~ s/[MRWSYKVHDB]/N/g;}' ${F};done;</executable>
        </command>
    </commandSet>
</commandSetRoot>
